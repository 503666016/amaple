<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>spa test</title>
	<link rel="icon" href="data:;base64,=">
	<!-- <script src="ice.0.1.0.js" config="config.js"></script> -->
	<link rel="stylesheet" type="text/css" href="static/css/reset.css">
	<link rel="stylesheet" type="text/css" href="static/css/index.css">
  	<script src="js/driver/EditTable.js"></script>
	<script src="js/driver/PageCtrl.js"></script>
</head>
<body>
	<div class="wrap" ice-module="wrap">
		<div class="login-body" ice-module="body" ice-src="login" :onrequest="reqBefore" :onresponse="reqAfter"></div>
		<div class="forget">
			<a href="forget_pwd" ice-target="body">忘记密码？</a>
		</div>

		<div class="info-table" ice-module="table">
			<!-- 表格组件渲染 -->
			<EditTable />
			
			<!-- 翻页组件渲染 -->
			<PageCtrl options="{{ pageCtrl }}" setPage="{{ setPage }}" />
		</div>
	</div>
</body>
<script>
	ice.config ( {
		directionCache: false
	} );

	var table = ice.module ( "table", {
		init : function () {
			return {
				// 绑定变量与绑定函数直接写返回对象内
				title: ["NO.", "UserName", "Avatar", "Age", "Address"],
				content: [
					["1", "Tom", "img/a1.png", "24", "LongHu street"],
					["2", "Sam", "img/a2.png", "23", "LongHu street"],
					["3", "Ann", "img/a3.png", "25", "LongHu street"],
					["4", "Jane", "img/a4.png", "22", "LongHu street"],
					["5", "Leo", "img/a5.png", "26", "LongHu street"]
				],
				pageCtrl: {
					reqPath 	: "data/user_info",
					currentPage : 1,
					pageCount 	: 10,
					current 	: "current"
				},
            
            	setPage : function ( newVal ) {
                	this.pageCtrl.currentPage = newVal;
                }
			};
		}
	} );




	// function(crystals, language, animate, http) {

	// 	http.get('login')
	// 	.done(function(res) {
	// 		console.log(res);
	// 	});

	// 	crystals.refreshModule('login', 'login-box');

	// 	// 状态注册
	// 	crystals.registerState('login', function(element) {
	// 		var domReg = document.querySelector('a[href=@register]');
	// 		if (!element.classList.contains('selected')) {
	// 			element.className += ' selected';
	// 			domReg.className = domReg.replace(' selected', '');
	// 		}

	// 		// 将参数传递到逆方法内，逆方法可以直接通过函数拿到传递进入的参数
	// 		crystals.refreshModule('register', 'login-box', function(newFragment, oldFragment) {
	// 			animateArr = [];
	// 			animateArr.push([oldFragment, {to: {opacity: 0}}, 1000]);
	// 			animate(animateArr, 1000, function() {
	// 				console.log('success');
	// 			})
	// 			.animate(oldFragment, {
	// 				to: {opacity: 0}
	// 			}, 1000)
	// 			.animate(oldFragment, {
	// 				from: {opacity: 0},
	// 				to: {opacity: 1}
	// 			}, 1000);
	// 		});

	// 		return [domReg, element];
	// 	}).inverse(function(domReg, element) {
	// 		if (element.classList.contains('selected') && !domReg.classList.contains('selected')) {
	// 			domReg.className += ' selected';
	// 			element.className = element.replace(' selected', '');
	// 		}

	// 		crystals.redirect('login', 'login-box');
	// 	});
	// }
</script>
</html>