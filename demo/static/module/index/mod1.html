<script>
	ice.module(['Language', 'Event'], function(crystals, language, event) {
		var LANG_MOD1 = language('index_mod1');
		crystals.path({
			'do_login': {200: LANG_MOD1.TITLE_INDEX}
		});

		// 获取提交按钮对象
		var btn = crystals('#submit');

		event.on(btn, 'click', function() {
			btn.setState('loading');
			crystals.submit({
				formName: 'login_form',
				module: {200: 'root'},
				code: 'code',
				data: '',
				timeout: 3000,
				success: function(result) {
					btn.setState('default');
					if (result.code === 400) {
						alert(result.message);
					}
				}
			});
		});


	});
</script>
<div>
	<form name="login_form" method="post" ice-loading="#submit::setState('loading')" ice-finish="#submit::setState('default')">
		<ul>
			<li><input type="text" name="user_name" /></li>
			<li><input type="password" name="password" /></li>
			<li><input type="submit" value="提交" id="submit" ice-driver="btn" /></li>
		</ul>
	</form>
</div>